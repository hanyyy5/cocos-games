{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\ufoGroup.js"],"names":["ufoG","cc","Class","name","properties","freqTime","prefab","Prefab","initPoolCount","minDelay","default","tooltip","maxDelay","extends","Component","type","onLoad","eState","D","commonInfo","gameState","none","common","batchInitObjPool","startAction","start","ui","length","fName","e","randNewUfo","bind","schedule","ufoInfo","delay","Math","random","scheduleOnce","getNewUfo","poolName","newNode","genNewNode","node","newV2","getNewUfoPositon","setPosition","newUfo","randx","parent","width","randy","height","v2","resumeAction","enabled","pauseAction","pause","ufoDied","nodeinfo","backObjPool"],"mappings":"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","file":"ufoGroup.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\n//ufo组\r\nvar ufoG = cc.Class({\r\n    name:'ufoG', \r\n    properties: {\r\n        name:'',\r\n        freqTime:0,\r\n        prefab:cc.Prefab,\r\n        initPoolCount:0,\r\n        minDelay:{\r\n            default:0,\r\n            tooltip: '最小延迟',\r\n        },\r\n        maxDelay:{\r\n            default:0,\r\n            tooltip: '最大延迟',\r\n        },\r\n    }\r\n});\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        ufoG: {\r\n            default:[],\r\n            type: ufoG\r\n        },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.eState = D.commonInfo.gameState.none;\r\n        //console.log(this.ufoG);\r\n        D.common.batchInitObjPool(this,this.ufoG);        \r\n        \r\n    },\r\n    startAction(){\r\n        // ufo \r\n        this.eState = D.commonInfo.gameState.start;\r\n        //定时生成敌机\r\n        for (var ui=0; ui< this.ufoG.length; ++ui){\r\n            var freqTime = this.ufoG[ui].freqTime;\r\n            var fName = 'callback_'+ui;\r\n            this[fName] = function(e){ this.randNewUfo(this.ufoG[e]); }.bind(this, ui);\r\n            this.schedule(this[fName], freqTime);\r\n        }\r\n    },\r\n    //随机时间生成敌机\r\n    randNewUfo: function(ufoInfo){\r\n        var delay = Math.random()*(ufoInfo.maxDelay-ufoInfo.minDelay) + ufoInfo.minDelay;\r\n        this.scheduleOnce(function(e) {this.getNewUfo(e);}.bind(this, ufoInfo), delay);\r\n    },\r\n    //生成敌机\r\n    getNewUfo: function(ufoInfo) {\r\n        var poolName = ufoInfo.name + 'Pool';\r\n        var newNode = D.common.genNewNode(this[poolName],ufoInfo.prefab,this.node);\r\n        var newV2 = this.getNewUfoPositon(newNode);\r\n        newNode.setPosition(newV2);\r\n    },\r\n    //敌机随机生成的位置\r\n    getNewUfoPositon: function(newUfo) {\r\n        //位于上方，先不可见\r\n        var randx = ((Math.random() - 0.5) * 2)*(this.node.parent.width/2-newUfo.width/2);\r\n        var randy = this.node.parent.height/2+newUfo.height/2;\r\n        return cc.v2(randx,randy);\r\n    },\r\n    //重新开始\r\n    resumeAction: function(){\r\n        this.enabled = true;\r\n        this.eState = D.commonInfo.gameState.start;\r\n    },\r\n    //暂停\r\n    pauseAction: function(){\r\n        this.enabled = false;\r\n        this.eState = D.commonInfo.gameState.pause;\r\n        \r\n    },\r\n    ufoDied: function(nodeinfo){\r\n        //回收节点\r\n        D.common.backObjPool(this,nodeinfo);\r\n    },\r\n});\r\n"]}