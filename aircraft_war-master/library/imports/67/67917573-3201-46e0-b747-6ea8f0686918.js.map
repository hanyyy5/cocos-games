{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\common.js"],"names":["gameState","cc","Enum","none","start","stop","common","Class","extends","Component","properties","statics","onLoad","D","commonInfo","batchInitObjPool","thisO","objArray","i","length","objinfo","initObjPool","objInfo","name","poolName","NodePool","initPollCount","ii","nodeO","instantiate","prefab","put","genNewNode","pool","nodeParent","newNode","size","get","addChild","backObjPool","nodeinfo","timeFmt","time","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","replace","RegExp","$1","getFullYear","substr","k"],"mappings":"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","file":"common.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var gameState = cc.Enum({\r\n    none: 0,\r\n    start: 1,\r\n    stop: 2,\r\n});\r\n\r\nvar common = cc.Class({\r\n    \r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n    },\r\n    statics: {\r\n        gameState\r\n    },\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        D.commonInfo = common;\r\n        D.common = this;\r\n    },\r\n    //批量初始化对象池 \r\n    batchInitObjPool: function(thisO, objArray){\r\n        \r\n        for(var i=0; i< objArray.length; i++) {\r\n            var objinfo = objArray[i];\r\n            this.initObjPool(thisO, objinfo);\r\n        }\r\n    },\r\n    \r\n    //初始化对象池\r\n    initObjPool: function(thisO,objInfo){\r\n        \r\n            var name = objInfo.name;\r\n            var poolName = name+'Pool';\r\n            thisO[poolName] = new cc.NodePool();\r\n            \r\n            let initPollCount = objInfo.initPollCount;\r\n\r\n            for (let ii = 0; ii < initPollCount; ++ii) {\r\n                let nodeO = cc.instantiate(objInfo.prefab); // 创建节点\r\n                thisO[poolName].put(nodeO); // 通过 putInPool 接口放入对象池\r\n            }\r\n    },\r\n    \r\n    //生成节点\r\n    genNewNode: function(pool,prefab,nodeParent){\r\n\r\n        let newNode = null;\r\n        if (pool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\r\n            newNode = pool.get();\r\n        } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\r\n            newNode = cc.instantiate(prefab);\r\n        }\r\n        nodeParent.addChild(newNode);\r\n        return newNode;\r\n    },\r\n    //放回对象池\r\n    backObjPool: function(thisO,nodeinfo){\r\n        var poolName = nodeinfo.name + 'Pool';\r\n        thisO[poolName].put(nodeinfo); \r\n    },\r\n    //时间格式化\r\n    timeFmt: function (time,fmt) { //author: meizz \r\n        var o = {\r\n            \"M+\": time.getMonth() + 1, //月份 \r\n            \"d+\": time.getDate(), //日 \r\n            \"h+\": time.getHours(), //小时 \r\n            \"m+\": time.getMinutes(), //分 \r\n            \"s+\": time.getSeconds(), //秒 \r\n            \"q+\": Math.floor((time.getMonth() + 3) / 3), //季度 \r\n            \"S\": time.getMilliseconds() //毫秒 \r\n        };\r\n        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (time.getFullYear() + \"\").substr(4 - RegExp.$1.length));\r\n        for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n        return fmt;\r\n    },\r\n    \r\n});\r\n"]}